---
import Layout from '../layouts/Layout.astro';
import { getCollection } from 'astro:content';

const experiments = await getCollection('experiments', ({ data }) => {
    return data.draft !== true;
});

const sortedExperiments = experiments.sort((a, b) =>
    b.data.date.getTime() - a.data.date.getTime()
);
---

<Layout title="Experiments - Broderick">
    <main class="container">
        <header class="hero">
            <h1>Experiments</h1>
            <p class="subtitle">My public lab where I subject myself to productivity trends, uncomfortable challenges, and random things my friends send me on reels at 2am. <br><br> If it works, I level up and add it to my daily life. If it fails... I try to permanently forget about it.  </p>
        </header>

        <nav class="nav">
            <div class="nav-menu">
                <a href="/" class="nav-link nav-triangle">
                    <img src="/assets/svg/triangle.svg" alt="Home" width="32" height="32">
                </a>
                <a href="/about" class="nav-link">About</a>
                <a href="/projects" class="nav-link">Projects</a>
                <a href="/thoughts" class="nav-link">Thoughts</a>
                <a href="/experiments" class="nav-link active">Experiments</a>
            </div>
        </nav>

        <section class="experiments-list">
            {sortedExperiments.map((experiment) => ( 
                <article class="experiment-card">
                    <a href={`/${experiment.slug}`}>
                        <h2>{experiment.data.title}</h2>
                        <p class="experiment-description">{experiment.data.description}</p>
                        <time datetime={experiment.data.date.toISOString()}>
                              {experiment.data.date.toLocaleDateString('en-US', {
                                  year: 'numeric',
                                  month: 'long',
                                  day: 'numeric',
                                  timeZone: 'UTC'
                              })}
                        </time>
                    </a>
                </article>
            ))}
        </section>
    </main>
</Layout> 

<style>
    .experiments-list {
        max-width: 800px;
        margin: 2rem 0;
    }

    .experiment-card {
        padding: 1.5rem 0;
        border-bottom: 1px solid rgba(0,0,0,0.1);
    }

    .experiment-card:last-child {
        border-bottom: none;
    }

    .experiment-card a {
        text-decoration: none;
        color: var(--text);
        display: block;
        transition: opacity 0.3s ease;
    }

    .experiment-card h2 {
        font-size: 1.2rem;
        margin-bottom: 0.5rem;
        font-weight: 600;
    }

    .experiment-description {
        opacity: 0.7;
        margin-bottom: 0.5rem;
        line-height: 1.5;
    }

    time {
        font-size: 0.875rem;
        opacity: 0.5;
    }

</style>
